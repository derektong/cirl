<%= javascript_include_tag "cases_index" %>
<%= javascript_include_tag "cases" %>
<%= provide :title, "Search cases" %>
<h3>Search cases</h3><br />
<%= render 'shared/sidebar' %>

<div class="main">
<%= form_tag cases_path, :method => :get, :class => "well" do %>
  <b>Full text search</b><br />
  <%= text_field_tag :search, params[:search], :class => "search" %>
  &nbsp;
  <%= submit_tag "Search", :name => nil, :class => "search_button" %>
  <br /><br />
  <b>Advanced search</b><br /><br />
  <i>Jurisdictions</i><br />
  <%= select_tag "case_jurisdiction_id", options_from_collection_for_select(@jurisdictions, "id", "name"), :multiple => true %><br /><br />

  <i>Courts</i><br />
  <%#= select_tag "case_court_id", options_from_collection_for_select(@courts, "id", "name"), :multiple => true %>
  <%= grouped_collection_select("case_court", :id, @jurisdictions, :courts, 
                                :name, :id, :name) %><br /><br />
<% end %>

<% if @cases != nil then %>
  <h3>Search results</h3><br />
  <table class="table">
    <%# cannot have partial called 'case' to avoid confusion with case statements %>
    <% @cases.each do |@case| %>
      <%= render :partial => "cirl_case_summary", :case => @case %>
    <% end %>
  </table>
<% end %>
</div>
